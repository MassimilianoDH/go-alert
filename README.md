<p align="center">
  <a href="" rel="noopener">
</p>

<h1 align="center">GO Alert</h1>

<div align="center">

  [![Status](https://img.shields.io/badge/status-active-success.svg)]() 
  [![GitHub Issues](https://img.shields.io/github/issues/MassimilianoDH/go-alert.svg)](https://github.com/MassimilianoDH/go-alert/issues)
  [![GitHub Pull Requests](https://img.shields.io/github/issues-pr/MassimilianoDH/go-alert.svg)](https://github.com/MassimilianoDH/go-alert/issues)
  [![License](https://img.shields.io/badge/license-MIT-blue.svg)](/LICENSE)

</div>

---

<p align="center"> 
    <br> A simple yet scalable GO Bot to broadcast monitoring alerts from various Cloud Providers to multiple Chat Services.
</p>

## üìù Table of Contents
- [About](#about)
- [Pre-Requisites](#prerequisites)
- [Set-Up](#setup)
- [Usage](#usage)
- [TODO](../master/TODO.md)
- [Built Using](#built_using)
- [Authors](#authors)
- [Acknowledgments](#acknowledgement)

## üßê About <a name = "about"></a>
A simple yet scalable GO bot to broadcast monitoring alerts from various Cloud Providers to multiple Chat Services. GO Alert uses self-hosted webhooks to catch HTTP POST alerts generated by Cloud Providers and dispatch them to your Chat Service of preference. Most used Cloud Providers and a wide range of Chat Services are supported. GO Templating is used for message formatting allowing more detailed styling. Dockerfile and Helm Chart included!

### Features <a name = "features"></a>
- Supported Cloud Providers:
  - Google Cloud
  - Amazon Web Services
  - Microsoft Azure
- Supported Chat Services:
  - Discord
  - MS Teams
  - Slack
  - Telegram
  - More
- Templating for Messages
- Dockerfile and Helm Chart Included

## üèÅ Pre-Requisites <a name = "prerequisites"></a>
- Basic understanding of GO
- Basic knowledge of Cloud Provider Notifications

## üöÄ Set-Up <a name = "setup"></a>

### Build (required) <a name = "build"></a>
 
```
git clone https://github.com/MassimilianoDH/go-alert
cd go-alert
go build
chmod +x go-alert
./go-alert (won't work until your env vars are set)
```

You may also use the provided `Dockerfile` to create a Docker Image.

### Env Vars (required) <a name = "envvars"></a>

Webhooks and Chat services will be activated selectively based on the environment variables set before running GO-Alert. Only add the Env Vars required for your preferred Cloud Provider(s) and Chat Service(s). These variables are case sensitive.

#### Basic Auth (required)

- `SERVER_PORT` Port where your server will be listening.
- `AUTH_USERNAME` User name for Basic Auth. Random string is recommend.
- `AUTH_PASSWORD` Password for Basic Auth. Random string is recommend.

#### Webhooks (optional)

Webhooks will be activated depending on the provided templates. Add at least ONE template. Sample templates in: `go-alert/templates`

- `GCP_TEMPLATE` Template used by Google Cloud listener. Listens on `/gcp` handle.
- `AZR_TEMPLATE` Template used by Microsoft Azure listener. Listens on `/azr` handle.
- `AWS_TEMPLATE` Template used by Amazon Web Services listener. Listens on `/aws` handle.

#### Chats (optional)

Chat Services will be activated depending on the provided credentials. Add at least ONE set of credentials.

- Discord
  - `DISCORD_BOT_TOKEN` Token generated by web UI.
  - `DISCORD_CHAT_ID` Chat ID where alerts will be sent.

- Microsoft Teams
  - `MSTEAMS_WEBHOOK` Microsoft Teams Webhook to corresponding chat.

- Slack
  - `SLACK_BOT_TOKEN` Slack Bot Token.
  - `SLACK_CHAT_ID` Slack Chat ID where alerts will be sent.

- Telegram
  - `TELEGRAM_BOT_TOKEN` Token generated by Telegram Bot Father.
  - `TELEGRAM_CHAT_ID` User/Group ID where alerts will be sent.

#### Example:

```
export SERVER_PORT=8080
export AUTH_USERNAME=username
export AUTH_PASSWORD=password

export GCP_TEMPLATE=templates/googletemplate.txt

export TELEGRAM_BOT_TOKEN=7vOaETGbJyOTcpQUEBYr7vOaETGbJyOTcpQUEBYr7vOaETGbJyOTcpQUEBYr
export TELEGRAM_CHAT_ID=-123456789
```

## üéà Usage <a name="usage"></a>

After setting up your environment variables GO-Alert should be good to GO. Run the binary and you will receive a message confirming that your bot is working. With the bot running now you will be able to add the public endpoint URL to your preferred Cloud Provider.

- [Google Cloud | Manage notification channels](https://cloud.google.com/monitoring/support/notification-options#webhooks)
- [Microsoft Azure | Create and manage action groups in the Azure portal](https://docs.microsoft.com/en-us/azure/azure-monitor/alerts/action-groups#secure-webhook)
- [Amazon Web Services | Fanout to HTTP/S endpoints](https://docs.aws.amazon.com/sns/latest/dg/sns-http-https-endpoint-as-subscriber.html)

You may also use the provided `Helm Chart` to run this bot.

## ‚õèÔ∏è Built Using <a name = "built_using"></a>
- [GO](https://GO.dev/) - Base
- [Gin](https://github.com/gin-GOnic/gin) - Framework
- [notify](https://github.com/nikoksr/notify) - Chat Service Integration
- [Google Cloud](https://cloud.google.com/) - Cloud Provider
- [Microsoft Azure](https://azure.microsoft.com/en-us/) - Cloud Provider
- [Amazon Web Services](https://aws.amazon.com/) - Cloud Provider

## ‚úçÔ∏è Authors <a name = "authors"></a>
- [@MassimilianoDH](https://github.com/MassimilianoDH) - Idea & Initial Work

See also the list of [contributors](https://github.com/MassimilianoDH/GO-alert/contributors) who participated in this project.

## üéâ Acknowledgements <a name = "acknowledgement"></a>
- Hat tip to anyone whose code was used
